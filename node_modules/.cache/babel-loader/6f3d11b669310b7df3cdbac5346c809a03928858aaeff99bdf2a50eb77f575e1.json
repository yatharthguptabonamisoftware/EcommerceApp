{"ast":null,"code":"import { defineComponent, getCurrentInstance, ref, computed, nextTick, watch, provide, reactive, onMounted, withDirectives, h } from 'vue';\nimport '../../../directives/index.mjs';\nimport { TwIcon } from '../../icon/index.mjs';\nimport { More } from '@element-plus/icons-vue';\nimport '../../../utils/index.mjs';\nimport Menu$1 from './utils/menu-bar.mjs';\nimport TwMenuCollapseTransition from './menu-collapse-transition.mjs';\nimport SubMenu from './sub-menu.mjs';\nimport { useMenuCssVar } from './use-menu-css-var.mjs';\nimport { buildProps, definePropType } from '../../../utils/vue/props.mjs';\nimport { mutable } from '../../../utils/typescript.mjs';\nimport { isString, isObject } from '@vue/shared';\nimport Resize from '../../../directives/resize/index.mjs';\nconst menuProps = buildProps({\n  mode: {\n    type: String,\n    values: [\"horizontal\", \"vertical\"],\n    default: \"vertical\"\n  },\n  defaultActive: {\n    type: String,\n    default: \"\"\n  },\n  defaultOpeneds: {\n    type: definePropType(Array),\n    default: () => mutable([])\n  },\n  uniqueOpened: Boolean,\n  router: Boolean,\n  menuTrigger: {\n    type: String,\n    values: [\"hover\", \"click\"],\n    default: \"hover\"\n  },\n  collapse: Boolean,\n  backgroundColor: String,\n  textColor: String,\n  activeTextColor: String,\n  collapseTransition: {\n    type: Boolean,\n    default: true\n  },\n  ellipsis: {\n    type: Boolean,\n    default: true\n  }\n});\nconst checkIndexPath = indexPath => Array.isArray(indexPath) && indexPath.every(path => isString(path));\nconst menuEmits = {\n  close: (index, indexPath) => isString(index) && checkIndexPath(indexPath),\n  open: (index, indexPath) => isString(index) && checkIndexPath(indexPath),\n  select: (index, indexPath, item, routerResult) => isString(index) && checkIndexPath(indexPath) && isObject(item) && (routerResult === void 0 || routerResult instanceof Promise)\n};\nvar Menu = defineComponent({\n  name: \"TwMenu\",\n  props: menuProps,\n  emits: menuEmits,\n  setup(props, {\n    emit,\n    slots,\n    expose\n  }) {\n    const instance = getCurrentInstance();\n    const router = instance.appContext.config.globalProperties.$router;\n    const menu = ref();\n    const openedMenus = ref(props.defaultOpeneds && !props.collapse ? props.defaultOpeneds.slice(0) : []);\n    const activeIndex = ref(props.defaultActive);\n    const items = ref({});\n    const subMenus = ref({});\n    const isMenuPopup = computed(() => {\n      return props.mode === \"horizontal\" || props.mode === \"vertical\" && props.collapse;\n    });\n    const initMenu = () => {\n      const activeItem = activeIndex.value && items.value[activeIndex.value];\n      if (!activeItem || props.mode === \"horizontal\" || props.collapse) return;\n      const indexPath = activeItem.indexPath;\n      indexPath.forEach(index => {\n        const subMenu = subMenus.value[index];\n        subMenu && openMenu(index, subMenu.indexPath);\n      });\n    };\n    const openMenu = (index, indexPath) => {\n      if (openedMenus.value.includes(index)) return;\n      if (props.uniqueOpened) {\n        openedMenus.value = openedMenus.value.filter(index2 => indexPath.includes(index2));\n      }\n      openedMenus.value.push(index);\n      emit(\"open\", index, indexPath);\n    };\n    const closeMenu = (index, indexPath) => {\n      const i = openedMenus.value.indexOf(index);\n      if (i !== -1) {\n        openedMenus.value.splice(i, 1);\n      }\n      emit(\"close\", index, indexPath);\n    };\n    const handleSubMenuClick = ({\n      index,\n      indexPath\n    }) => {\n      const isOpened = openedMenus.value.includes(index);\n      if (isOpened) {\n        closeMenu(index, indexPath);\n      } else {\n        openMenu(index, indexPath);\n      }\n    };\n    const handleMenuItemClick = menuItem => {\n      if (props.mode === \"horizontal\" || props.collapse) {\n        openedMenus.value = [];\n      }\n      const {\n        index,\n        indexPath\n      } = menuItem;\n      if (index === void 0 || indexPath === void 0) return;\n      if (props.router && router) {\n        const route = menuItem.route || index;\n        const routerResult = router.push(route).then(res => {\n          if (!res) activeIndex.value = index;\n          return res;\n        });\n        emit(\"select\", index, indexPath, {\n          index,\n          indexPath,\n          route\n        }, routerResult);\n      } else {\n        activeIndex.value = index;\n        emit(\"select\", index, indexPath, {\n          index,\n          indexPath\n        });\n      }\n    };\n    const updateActiveIndex = val => {\n      const itemsInData = items.value;\n      const item = itemsInData[val] || activeIndex.value && itemsInData[activeIndex.value] || itemsInData[props.defaultActive];\n      if (item) {\n        activeIndex.value = item.index;\n        initMenu();\n      } else {\n        activeIndex.value = val;\n      }\n    };\n    const handleResize = () => {\n      nextTick(() => instance.proxy.$forceUpdate());\n    };\n    watch(() => props.defaultActive, currentActive => {\n      if (!items.value[currentActive]) {\n        activeIndex.value = \"\";\n      }\n      updateActiveIndex(currentActive);\n    });\n    watch(items.value, () => initMenu());\n    watch(() => props.collapse, value => {\n      if (value) openedMenus.value = [];\n    });\n    {\n      const addSubMenu = item => {\n        subMenus.value[item.index] = item;\n      };\n      const removeSubMenu = item => {\n        delete subMenus.value[item.index];\n      };\n      const addMenuItem = item => {\n        items.value[item.index] = item;\n      };\n      const removeMenuItem = item => {\n        delete items.value[item.index];\n      };\n      provide(\"rootMenu\", reactive({\n        props,\n        openedMenus,\n        items,\n        subMenus,\n        activeIndex,\n        isMenuPopup,\n        addMenuItem,\n        removeMenuItem,\n        addSubMenu,\n        removeSubMenu,\n        openMenu,\n        closeMenu,\n        handleMenuItemClick,\n        handleSubMenuClick\n      }));\n      provide(`subMenu:${instance.uid}`, {\n        addSubMenu,\n        removeSubMenu,\n        mouseInChild: ref(false)\n      });\n    }\n    onMounted(() => {\n      initMenu();\n      if (props.mode === \"horizontal\") {\n        new Menu$1(instance.vnode.el);\n      }\n    });\n    {\n      const open = index => {\n        const {\n          indexPath\n        } = subMenus.value[index];\n        indexPath.forEach(i => openMenu(i, indexPath));\n      };\n      expose({\n        open,\n        close: closeMenu,\n        handleResize\n      });\n    }\n    const flattedChildren = children => {\n      const vnodes = Array.isArray(children) ? children : [children];\n      const result = [];\n      vnodes.forEach(child => {\n        if (Array.isArray(child.children)) {\n          result.push(...flattedChildren(child.children));\n        } else {\n          result.push(child);\n        }\n      });\n      return result;\n    };\n    const useVNodeResize = vnode => props.mode === \"horizontal\" ? withDirectives(vnode, [[Resize, handleResize]]) : vnode;\n    return () => {\n      var _a, _b, _c, _d;\n      let slot = (_b = (_a = slots.default) == null ? void 0 : _a.call(slots)) != null ? _b : [];\n      const vShowMore = [];\n      if (props.mode === \"horizontal\" && menu.value) {\n        const items2 = Array.from((_d = (_c = menu.value) == null ? void 0 : _c.childNodes) != null ? _d : []).filter(item => item.nodeName !== \"#text\" || item.nodeValue);\n        const originalSlot = flattedChildren(slot);\n        const moreItemWidth = 64;\n        const paddingLeft = parseInt(getComputedStyle(menu.value).paddingLeft, 10);\n        const paddingRight = parseInt(getComputedStyle(menu.value).paddingRight, 10);\n        const menuWidth = menu.value.clientWidth - paddingLeft - paddingRight;\n        let calcWidth = 0;\n        let sliceIndex = 0;\n        items2.forEach((item, index) => {\n          calcWidth += item.offsetWidth || 0;\n          if (calcWidth <= menuWidth - moreItemWidth) {\n            sliceIndex = index + 1;\n          }\n        });\n        const slotDefault = originalSlot.slice(0, sliceIndex);\n        const slotMore = originalSlot.slice(sliceIndex);\n        if ((slotMore == null ? void 0 : slotMore.length) && props.ellipsis) {\n          slot = slotDefault;\n          vShowMore.push(h(SubMenu, {\n            index: \"sub-menu-more\",\n            class: \"el-sub-menu__hide-arrow\"\n          }, {\n            title: () => h(TwIcon, {\n              class: [\"el-sub-menu__icon-more\"]\n            }, {\n              default: () => h(More)\n            }),\n            default: () => slotMore\n          }));\n        }\n      }\n      const ulStyle = useMenuCssVar(props);\n      const resizeMenu = vNode => props.ellipsis ? useVNodeResize(vNode) : vNode;\n      const vMenu = resizeMenu(h(\"ul\", {\n        key: String(props.collapse),\n        role: \"menubar\",\n        ref: menu,\n        style: ulStyle.value,\n        class: {\n          \"el-menu\": true,\n          \"el-menu--horizontal\": props.mode === \"horizontal\",\n          \"el-menu--collapse\": props.collapse\n        }\n      }, [...slot.map(vnode => resizeMenu(vnode)), ...vShowMore]));\n      if (props.collapseTransition && props.mode === \"vertical\") {\n        return h(TwMenuCollapseTransition, () => vMenu);\n      }\n      return vMenu;\n    };\n  }\n});\nexport { Menu as default, menuEmits, menuProps };","map":{"version":3,"names":["menuProps","buildProps","mode","type","String","values","default","defaultActive","defaultOpeneds","definePropType","Array","mutable","uniqueOpened","Boolean","router","menuTrigger","collapse","backgroundColor","textColor","activeTextColor","collapseTransition","ellipsis","checkIndexPath","indexPath","isArray","every","path","isString","menuEmits","close","index","open","select","item","routerResult","isObject","Promise","Menu","defineComponent","name","props","emits","setup","emit","slots","expose","instance","getCurrentInstance","appContext","config","globalProperties","$router","menu","ref","openedMenus","slice","activeIndex","items","subMenus","isMenuPopup","computed","initMenu","activeItem","value","forEach","subMenu","openMenu","includes","filter","index2","push","closeMenu","i","indexOf","splice","handleSubMenuClick","isOpened","handleMenuItemClick","menuItem","route","then","res","updateActiveIndex","val","itemsInData","handleResize","nextTick","proxy","$forceUpdate","watch","currentActive","addSubMenu","removeSubMenu","addMenuItem","removeMenuItem","provide","reactive","uid","mouseInChild","onMounted","Menu$1","vnode","el","flattedChildren","children","vnodes","result","child","useVNodeResize","withDirectives","Resize","_a","_b","_c","_d","slot","call","vShowMore","items2","from","childNodes","nodeName","nodeValue","originalSlot","moreItemWidth","paddingLeft","parseInt","getComputedStyle","paddingRight","menuWidth","clientWidth","calcWidth","sliceIndex","offsetWidth","slotDefault","slotMore","length","h","SubMenu","class","title","TwIcon","More","ulStyle","useMenuCssVar","resizeMenu","vNode","vMenu","key","role","style","map","TwMenuCollapseTransition"],"sources":["/home/bonami/Desktop/Projects/ECommerce/packages/components/menu/src/menu.ts"],"sourcesContent":["import {\n  defineComponent,\n  getCurrentInstance,\n  watch,\n  computed,\n  ref,\n  provide,\n  onMounted,\n  h,\n  withDirectives,\n  reactive,\n  nextTick,\n} from 'vue'\nimport { Resize } from '@tw-element/directives'\nimport TwIcon from '@tw-element/components/icon'\nimport { More } from '@element-plus/icons-vue'\nimport {\n  buildProps,\n  definePropType,\n  mutable,\n  isString,\n  isObject,\n} from '@tw-element/utils'\nimport Menubar from './utils/menu-bar'\nimport TwMenuCollapseTransition from './menu-collapse-transition.vue'\nimport TwSubMenu from './sub-menu'\nimport { useMenuCssVar } from './use-menu-css-var'\n\nimport type { MenuItemClicked, MenuProvider, SubMenuProvider } from './types'\nimport type { NavigationFailure, Router } from 'vue-router'\nimport type { VNode, ExtractPropTypes, VNodeNormalizedChildren } from 'vue'\n\nexport const menuProps = buildProps({\n  mode: {\n    type: String,\n    values: ['horizontal', 'vertical'],\n    default: 'vertical',\n  },\n  defaultActive: {\n    type: String,\n    default: '',\n  },\n  defaultOpeneds: {\n    type: definePropType<string[]>(Array),\n    default: () => mutable([] as const),\n  },\n  uniqueOpened: Boolean,\n  router: Boolean,\n  menuTrigger: {\n    type: String,\n    values: ['hover', 'click'],\n    default: 'hover',\n  },\n  collapse: Boolean,\n  backgroundColor: String,\n  textColor: String,\n  activeTextColor: String,\n  collapseTransition: {\n    type: Boolean,\n    default: true,\n  },\n  ellipsis: {\n    type: Boolean,\n    default: true,\n  },\n} as const)\nexport type MenuProps = ExtractPropTypes<typeof menuProps>\n\nconst checkIndexPath = (indexPath: unknown): indexPath is string[] =>\n  Array.isArray(indexPath) && indexPath.every((path) => isString(path))\n\nexport const menuEmits = {\n  close: (index: string, indexPath: string[]) =>\n    isString(index) && checkIndexPath(indexPath),\n\n  open: (index: string, indexPath: string[]) =>\n    isString(index) && checkIndexPath(indexPath),\n\n  select: (\n    index: string,\n    indexPath: string[],\n    item: MenuItemClicked,\n    routerResult?: Promise<void | NavigationFailure>\n  ) =>\n    isString(index) &&\n    checkIndexPath(indexPath) &&\n    isObject(item) &&\n    (routerResult === undefined || routerResult instanceof Promise),\n}\nexport type MenuEmits = typeof menuEmits\n\nexport default defineComponent({\n  name: 'TwMenu',\n\n  props: menuProps,\n  emits: menuEmits,\n\n  setup(props, { emit, slots, expose }) {\n    const instance = getCurrentInstance()!\n    const router = instance.appContext.config.globalProperties.$router as Router\n    const menu = ref<HTMLUListElement>()\n\n    // data\n    const openedMenus = ref<MenuProvider['openedMenus']>(\n      props.defaultOpeneds && !props.collapse\n        ? props.defaultOpeneds.slice(0)\n        : []\n    )\n    const activeIndex = ref<MenuProvider['activeIndex']>(props.defaultActive)\n    const items = ref<MenuProvider['items']>({})\n    const subMenus = ref<MenuProvider['subMenus']>({})\n\n    // computed\n    const isMenuPopup = computed<MenuProvider['isMenuPopup']>(() => {\n      return (\n        props.mode === 'horizontal' ||\n        (props.mode === 'vertical' && props.collapse)\n      )\n    })\n\n    // methods\n    const initMenu = () => {\n      const activeItem = activeIndex.value && items.value[activeIndex.value]\n      if (!activeItem || props.mode === 'horizontal' || props.collapse) return\n\n      const indexPath = activeItem.indexPath\n\n      // 展开该菜单项的路径上所有子菜单\n      // expand all subMenus of the menu item\n      indexPath.forEach((index) => {\n        const subMenu = subMenus.value[index]\n        subMenu && openMenu(index, subMenu.indexPath)\n      })\n    }\n\n    const openMenu: MenuProvider['openMenu'] = (index, indexPath) => {\n      if (openedMenus.value.includes(index)) return\n      // 将不在该菜单路径下的其余菜单收起\n      // collapse all menu that are not under current menu item\n      if (props.uniqueOpened) {\n        openedMenus.value = openedMenus.value.filter((index: string) =>\n          indexPath.includes(index)\n        )\n      }\n      openedMenus.value.push(index)\n      emit('open', index, indexPath)\n    }\n\n    const closeMenu: MenuProvider['closeMenu'] = (index, indexPath) => {\n      const i = openedMenus.value.indexOf(index)\n      if (i !== -1) {\n        openedMenus.value.splice(i, 1)\n      }\n      emit('close', index, indexPath)\n    }\n\n    const handleSubMenuClick: MenuProvider['handleSubMenuClick'] = ({\n      index,\n      indexPath,\n    }) => {\n      const isOpened = openedMenus.value.includes(index)\n\n      if (isOpened) {\n        closeMenu(index, indexPath)\n      } else {\n        openMenu(index, indexPath)\n      }\n    }\n\n    const handleMenuItemClick: MenuProvider['handleMenuItemClick'] = (\n      menuItem\n    ) => {\n      if (props.mode === 'horizontal' || props.collapse) {\n        openedMenus.value = []\n      }\n\n      const { index, indexPath } = menuItem\n      if (index === undefined || indexPath === undefined) return\n\n      if (props.router && router) {\n        const route = menuItem.route || index\n        const routerResult = router.push(route).then((res) => {\n          if (!res) activeIndex.value = index\n          return res\n        })\n        emit(\n          'select',\n          index,\n          indexPath,\n          { index, indexPath, route },\n          routerResult\n        )\n      } else {\n        activeIndex.value = index\n        emit('select', index, indexPath, { index, indexPath })\n      }\n    }\n\n    const updateActiveIndex = (val: string) => {\n      const itemsInData = items.value\n      const item =\n        itemsInData[val] ||\n        (activeIndex.value && itemsInData[activeIndex.value]) ||\n        itemsInData[props.defaultActive]\n\n      if (item) {\n        activeIndex.value = item.index\n        initMenu()\n      } else {\n        activeIndex.value = val\n      }\n    }\n    const handleResize = () => {\n      nextTick(() => instance.proxy!.$forceUpdate())\n    }\n\n    watch(\n      () => props.defaultActive,\n      (currentActive) => {\n        if (!items.value[currentActive]) {\n          activeIndex.value = ''\n        }\n        updateActiveIndex(currentActive)\n      }\n    )\n\n    watch(items.value, () => initMenu())\n\n    watch(\n      () => props.collapse,\n      (value) => {\n        if (value) openedMenus.value = []\n      }\n    )\n\n    // provide\n    {\n      const addSubMenu: MenuProvider['addSubMenu'] = (item) => {\n        subMenus.value[item.index] = item\n      }\n\n      const removeSubMenu: MenuProvider['removeSubMenu'] = (item) => {\n        delete subMenus.value[item.index]\n      }\n\n      const addMenuItem: MenuProvider['addMenuItem'] = (item) => {\n        items.value[item.index] = item\n      }\n\n      const removeMenuItem: MenuProvider['removeMenuItem'] = (item) => {\n        delete items.value[item.index]\n      }\n      provide<MenuProvider>(\n        'rootMenu',\n        reactive({\n          props,\n          openedMenus,\n          items,\n          subMenus,\n          activeIndex,\n          isMenuPopup,\n\n          addMenuItem,\n          removeMenuItem,\n          addSubMenu,\n          removeSubMenu,\n          openMenu,\n          closeMenu,\n          handleMenuItemClick,\n          handleSubMenuClick,\n        })\n      )\n      provide<SubMenuProvider>(`subMenu:${instance.uid}`, {\n        addSubMenu,\n        removeSubMenu,\n        mouseInChild: ref(false),\n      })\n    }\n\n    // lifecycle\n    onMounted(() => {\n      initMenu()\n      if (props.mode === 'horizontal') {\n        new Menubar(instance.vnode.el!)\n      }\n    })\n\n    {\n      const open = (index: string) => {\n        const { indexPath } = subMenus.value[index]\n        indexPath.forEach((i) => openMenu(i, indexPath))\n      }\n      expose({\n        open,\n        close: closeMenu,\n        handleResize,\n      })\n    }\n\n    const flattedChildren = (children: VNodeNormalizedChildren) => {\n      const vnodes = Array.isArray(children) ? children : [children]\n      const result: any[] = []\n      vnodes.forEach((child: any) => {\n        if (Array.isArray(child.children)) {\n          result.push(...flattedChildren(child.children))\n        } else {\n          result.push(child)\n        }\n      })\n      return result\n    }\n\n    const useVNodeResize = (vnode: VNode) =>\n      props.mode === 'horizontal'\n        ? withDirectives(vnode, [[Resize, handleResize]])\n        : vnode\n    return () => {\n      let slot = slots.default?.() ?? []\n      const vShowMore: VNode[] = []\n\n      if (props.mode === 'horizontal' && menu.value) {\n        const items = Array.from(menu.value?.childNodes ?? []).filter(\n          (item) => item.nodeName !== '#text' || item.nodeValue\n        ) as HTMLElement[]\n        const originalSlot = flattedChildren(slot)\n        const moreItemWidth = 64\n        const paddingLeft = parseInt(\n          getComputedStyle(menu.value).paddingLeft,\n          10\n        )\n        const paddingRight = parseInt(\n          getComputedStyle(menu.value).paddingRight,\n          10\n        )\n        const menuWidth = menu.value.clientWidth - paddingLeft - paddingRight\n        let calcWidth = 0\n        let sliceIndex = 0\n        items.forEach((item, index) => {\n          calcWidth += item.offsetWidth || 0\n          if (calcWidth <= menuWidth - moreItemWidth) {\n            sliceIndex = index + 1\n          }\n        })\n        const slotDefault = originalSlot.slice(0, sliceIndex)\n        const slotMore = originalSlot.slice(sliceIndex)\n        if (slotMore?.length && props.ellipsis) {\n          slot = slotDefault\n          vShowMore.push(\n            h(\n              TwSubMenu,\n              {\n                index: 'sub-menu-more',\n                class: 'el-sub-menu__hide-arrow',\n              },\n              {\n                title: () =>\n                  h(\n                    TwIcon,\n                    {\n                      class: ['el-sub-menu__icon-more'],\n                    },\n                    { default: () => h(More) }\n                  ),\n                default: () => slotMore,\n              }\n            )\n          )\n        }\n      }\n\n      const ulStyle = useMenuCssVar(props)\n\n      const resizeMenu = (vNode: VNode) =>\n        props.ellipsis ? useVNodeResize(vNode) : vNode\n\n      const vMenu = resizeMenu(\n        h(\n          'ul',\n          {\n            key: String(props.collapse),\n            role: 'menubar',\n            ref: menu,\n            style: ulStyle.value,\n            class: {\n              'el-menu': true,\n              'el-menu--horizontal': props.mode === 'horizontal',\n              'el-menu--collapse': props.collapse,\n            },\n          },\n          [...slot.map((vnode) => resizeMenu(vnode)), ...vShowMore]\n        )\n      )\n\n      if (props.collapseTransition && props.mode === 'vertical') {\n        return h(TwMenuCollapseTransition, () => vMenu)\n      }\n\n      return vMenu\n    }\n  },\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}