{"ast":null,"code":"import { defineComponent, ref, watch, provide, openBlock, createElementBlock, normalizeClass, renderSlot } from 'vue';\nimport '../../../constants/index.mjs';\nimport '../../../hooks/index.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { UPDATE_MODEL_EVENT, CHANGE_EVENT } from '../../../constants/event.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nconst _sfc_main = defineComponent({\n  name: \"TwCollapse\",\n  props: {\n    accordion: Boolean,\n    modelValue: {\n      type: [Array, String, Number],\n      default: () => []\n    }\n  },\n  emits: [UPDATE_MODEL_EVENT, CHANGE_EVENT],\n  setup(props, {\n    emit\n  }) {\n    const ns = useNamespace(\"collapse\");\n    const activeNames = ref([].concat(props.modelValue));\n    const setActiveNames = _activeNames => {\n      activeNames.value = [].concat(_activeNames);\n      const value = props.accordion ? activeNames.value[0] : activeNames.value;\n      emit(UPDATE_MODEL_EVENT, value);\n      emit(CHANGE_EVENT, value);\n    };\n    const handleItemClick = name => {\n      if (props.accordion) {\n        setActiveNames((activeNames.value[0] || activeNames.value[0] === 0) && activeNames.value[0] === name ? \"\" : name);\n      } else {\n        const _activeNames = activeNames.value.slice(0);\n        const index = _activeNames.indexOf(name);\n        if (index > -1) {\n          _activeNames.splice(index, 1);\n        } else {\n          _activeNames.push(name);\n        }\n        setActiveNames(_activeNames);\n      }\n    };\n    watch(() => props.modelValue, () => {\n      activeNames.value = [].concat(props.modelValue);\n    }, {\n      deep: true\n    });\n    provide(\"collapse\", {\n      activeNames,\n      handleItemClick\n    });\n    return {\n      ns,\n      activeNames,\n      setActiveNames,\n      handleItemClick\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    class: normalizeClass(_ctx.ns.b()),\n    role: \"tablist\",\n    \"aria-multiselectable\": \"true\"\n  }, [renderSlot(_ctx.$slots, \"default\")], 2);\n}\nvar Collapse = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { Collapse as default };","map":{"version":3,"names":["_sfc_main","defineComponent","name","props","accordion","Boolean","modelValue","type","Array","String","Number","default","emits","UPDATE_MODEL_EVENT","CHANGE_EVENT","setup","emit","ns","useNamespace","activeNames","ref","concat","setActiveNames","_activeNames","value","handleItemClick","slice","index","indexOf","splice","push","watch","deep","provide","_cache","$props","$setup","$data","$options","openBlock","createElementBlock","class","normalizeClass","_ctx","b","role","renderSlot","$slots"],"sources":["/home/bonami/Desktop/Projects/ECommerce/packages/components/collapse/src/collapse.vue"],"sourcesContent":["<template>\n  <div :class=\"ns.b()\" role=\"tablist\" aria-multiselectable=\"true\">\n    <slot></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, watch, provide } from 'vue'\nimport { UPDATE_MODEL_EVENT, CHANGE_EVENT } from '@tw-element/constants'\nimport { useNamespace } from '@tw-element/hooks'\nimport type { CollapseProvider } from './collapse.type'\n\nexport default defineComponent({\n  name: 'TwCollapse',\n  props: {\n    accordion: Boolean,\n    modelValue: {\n      type: [Array, String, Number] as PropType<\n        string | number | Array<string | number>\n      >,\n      default: () => [],\n    },\n  },\n  emits: [UPDATE_MODEL_EVENT, CHANGE_EVENT],\n  setup(props, { emit }) {\n    const ns = useNamespace('collapse')\n    const activeNames = ref([].concat(props.modelValue))\n\n    const setActiveNames = (_activeNames) => {\n      activeNames.value = [].concat(_activeNames)\n      const value = props.accordion ? activeNames.value[0] : activeNames.value\n      emit(UPDATE_MODEL_EVENT, value)\n      emit(CHANGE_EVENT, value)\n    }\n\n    const handleItemClick = (name) => {\n      if (props.accordion) {\n        setActiveNames(\n          (activeNames.value[0] || activeNames.value[0] === 0) &&\n            activeNames.value[0] === name\n            ? ''\n            : name\n        )\n      } else {\n        const _activeNames = activeNames.value.slice(0)\n        const index = _activeNames.indexOf(name)\n\n        if (index > -1) {\n          _activeNames.splice(index, 1)\n        } else {\n          _activeNames.push(name)\n        }\n        setActiveNames(_activeNames)\n      }\n    }\n\n    watch(\n      () => props.modelValue,\n      () => {\n        activeNames.value = [].concat(props.modelValue)\n      },\n      {\n        deep: true,\n      }\n    )\n\n    provide<CollapseProvider>('collapse', {\n      activeNames,\n      handleItemClick,\n    })\n\n    return {\n      ns,\n      activeNames,\n      setActiveNames,\n      handleItemClick,\n    }\n  },\n})\n</script>\n"],"mappings":";;;;;;AAYA,MAAKA,SAAA,GAAaC,eAAA,CAAa;EAC7BC,IAAA,EAAM;EACNC,KAAA,EAAO;IACLC,SAAA,EAAWC,OAAA;IACXC,UAAA,EAAY;MACVC,IAAA,EAAM,CAACC,KAAA,EAAOC,MAAA,EAAQC,MAAA;MAGtBC,OAAA,EAASA,CAAA,KAAM;IAAA;EAAA;EAGnBC,KAAA,EAAO,CAACC,kBAAA,EAAoBC,YAAA;EAC5BC,MAAMZ,KAAA,EAAO;IAAEa;EAAA,GAAQ;IACrB,MAAMC,EAAA,GAAKC,YAAA,CAAa;IACxB,MAAMC,WAAA,GAAcC,GAAA,CAAI,GAAGC,MAAA,CAAOlB,KAAA,CAAMG,UAAA;IAExC,MAAMgB,cAAA,GAAkBC,YAAA,IAAiB;MACvCJ,WAAA,CAAYK,KAAA,GAAQ,GAAGH,MAAA,CAAOE,YAAA;MAC9B,MAAMC,KAAA,GAAQrB,KAAA,CAAMC,SAAA,GAAYe,WAAA,CAAYK,KAAA,CAAM,KAAKL,WAAA,CAAYK,KAAA;MACnER,IAAA,CAAKH,kBAAA,EAAoBW,KAAA;MACzBR,IAAA,CAAKF,YAAA,EAAcU,KAAA;IAAA;IAGrB,MAAMC,eAAA,GAAmBvB,IAAA,IAAS;MAChC,IAAIC,KAAA,CAAMC,SAAA,EAAW;QACnBkB,cAAA,CACG,CAAAH,WAAA,CAAYK,KAAA,CAAM,MAAML,WAAA,CAAYK,KAAA,CAAM,OAAO,MAChDL,WAAA,CAAYK,KAAA,CAAM,OAAOtB,IAAA,GACvB,KACAA,IAAA;MAAA,OAED;QACL,MAAMqB,YAAA,GAAeJ,WAAA,CAAYK,KAAA,CAAME,KAAA,CAAM;QAC7C,MAAMC,KAAA,GAAQJ,YAAA,CAAaK,OAAA,CAAQ1B,IAAA;QAEnC,IAAIyB,KAAA,GAAQ,IAAI;UACdJ,YAAA,CAAaM,MAAA,CAAOF,KAAA,EAAO;QAAA,OACtB;UACLJ,YAAA,CAAaO,IAAA,CAAK5B,IAAA;QAAA;QAEpBoB,cAAA,CAAeC,YAAA;MAAA;IAAA;IAInBQ,KAAA,CACE,MAAM5B,KAAA,CAAMG,UAAA,EACZ,MAAM;MACJa,WAAA,CAAYK,KAAA,GAAQ,GAAGH,MAAA,CAAOlB,KAAA,CAAMG,UAAA;IAAA,GAEtC;MACE0B,IAAA,EAAM;IAAA;IAIVC,OAAA,CAA0B,YAAY;MACpCd,WAAA;MACAM;IAAA;IAGF,OAAO;MACLR,EAAA;MACAE,WAAA;MACAG,cAAA;MACAG;IAAA;EAAA;AAAA;2BA1EJS,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAEMC,KAAA,EAAAC,QAAA;SAFKC,SAAA,IAAAC,kBAAA,CAAM;IAAIC,KAAA,EAAKC,cAAA,CAASC,IAAA,CAAA1B,EAAA,CAAA2B,CAAA;IAACC,IAAA;IAAA;KAClC,CAAAC,UAAA,CAAAH,IAAA,CAAAI,MAAA,a"},"metadata":{},"sourceType":"module","externalDependencies":[]}