{"ast":null,"code":"import { defineComponent, shallowRef, ref, computed, onMounted, resolveComponent, openBlock, createBlock, Transition, withCtx, createElementBlock, normalizeStyle, normalizeClass, withModifiers, renderSlot, createVNode, createCommentVNode } from 'vue';\nimport { useThrottleFn, useEventListener } from '@vueuse/core';\nimport { TwIcon } from '../../icon/index.mjs';\nimport '../../../utils/index.mjs';\nimport { CaretTop } from '@element-plus/icons-vue';\nimport '../../../hooks/index.mjs';\nimport { backtopProps, backtopEmits } from './backtop2.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { easeInOutCubic } from '../../../utils/animation.mjs';\nimport { throwError } from '../../../utils/error.mjs';\nconst COMPONENT_NAME = \"TwBacktop\";\nconst _sfc_main = defineComponent({\n  name: COMPONENT_NAME,\n  components: {\n    TwIcon,\n    CaretTop\n  },\n  props: backtopProps,\n  emits: backtopEmits,\n  setup(props, {\n    emit\n  }) {\n    const ns = useNamespace(\"backtop\");\n    const el = shallowRef(document.documentElement);\n    const container = shallowRef(document);\n    const visible = ref(false);\n    const styleBottom = computed(() => `${props.bottom}px`);\n    const styleRight = computed(() => `${props.right}px`);\n    const scrollToTop = () => {\n      if (!el.value) return;\n      const beginTime = Date.now();\n      const beginValue = el.value.scrollTop;\n      const frameFunc = () => {\n        if (!el.value) return;\n        const progress = (Date.now() - beginTime) / 500;\n        if (progress < 1) {\n          el.value.scrollTop = beginValue * (1 - easeInOutCubic(progress));\n          requestAnimationFrame(frameFunc);\n        } else {\n          el.value.scrollTop = 0;\n        }\n      };\n      requestAnimationFrame(frameFunc);\n    };\n    const handleScroll = () => {\n      if (el.value) visible.value = el.value.scrollTop >= props.visibilityHeight;\n    };\n    const handleClick = event => {\n      scrollToTop();\n      emit(\"click\", event);\n    };\n    const handleScrollThrottled = useThrottleFn(handleScroll, 300);\n    onMounted(() => {\n      var _a;\n      if (props.target) {\n        el.value = (_a = document.querySelector(props.target)) != null ? _a : void 0;\n        if (!el.value) {\n          throwError(COMPONENT_NAME, `target is not existed: ${props.target}`);\n        }\n        container.value = el.value;\n      }\n      useEventListener(container, \"scroll\", handleScrollThrottled);\n    });\n    return {\n      visible,\n      styleBottom,\n      styleRight,\n      handleClick,\n      ns\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_caret_top = resolveComponent(\"caret-top\");\n  const _component_el_icon = resolveComponent(\"el-icon\");\n  return openBlock(), createBlock(Transition, {\n    name: `${_ctx.ns.namespace.value}-fade-in`\n  }, {\n    default: withCtx(() => [_ctx.visible ? (openBlock(), createElementBlock(\"div\", {\n      key: 0,\n      style: normalizeStyle({\n        right: _ctx.styleRight,\n        bottom: _ctx.styleBottom\n      }),\n      class: normalizeClass(_ctx.ns.b()),\n      onClick: _cache[0] || (_cache[0] = withModifiers((...args) => _ctx.handleClick && _ctx.handleClick(...args), [\"stop\"]))\n    }, [renderSlot(_ctx.$slots, \"default\", {}, () => [createVNode(_component_el_icon, {\n      class: normalizeClass(_ctx.ns.e(\"icon\"))\n    }, {\n      default: withCtx(() => [createVNode(_component_caret_top)]),\n      _: 1\n    }, 8, [\"class\"])])], 6)) : createCommentVNode(\"v-if\", true)]),\n    _: 3\n  }, 8, [\"name\"]);\n}\nvar Backtop = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { Backtop as default };","map":{"version":3,"names":["COMPONENT_NAME","_sfc_main","defineComponent","name","components","TwIcon","CaretTop","props","backtopProps","emits","backtopEmits","setup","emit","ns","useNamespace","el","shallowRef","document","documentElement","container","visible","ref","styleBottom","computed","bottom","styleRight","right","scrollToTop","value","beginTime","Date","now","beginValue","scrollTop","frameFunc","progress","easeInOutCubic","requestAnimationFrame","handleScroll","visibilityHeight","handleClick","event","handleScrollThrottled","useThrottleFn","onMounted","_a","target","querySelector","throwError","useEventListener","openBlock","createBlock","Transition","default","withCtx","key","style","normalizeStyle","_ctx","class","normalizeClass","b","renderSlot","$slots","createVNode","_component_el_icon"],"sources":["/home/bonami/Desktop/Projects/ECommerce/packages/components/backtop/src/backtop.vue"],"sourcesContent":["<template>\n  <transition :name=\"`${ns.namespace.value}-fade-in`\">\n    <div\n      v-if=\"visible\"\n      :style=\"{\n        right: styleRight,\n        bottom: styleBottom,\n      }\"\n      :class=\"ns.b()\"\n      @click.stop=\"handleClick\"\n    >\n      <slot>\n        <el-icon :class=\"ns.e('icon')\"><caret-top /></el-icon>\n      </slot>\n    </div>\n  </transition>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, computed, onMounted, shallowRef } from 'vue'\nimport { useEventListener, useThrottleFn } from '@vueuse/core'\nimport { TwIcon } from '@tw-element/components/icon'\nimport { easeInOutCubic, throwError } from '@tw-element/utils'\nimport { CaretTop } from '@element-plus/icons-vue'\nimport { useNamespace } from '@tw-element/hooks'\n\nimport { backtopEmits, backtopProps } from './backtop'\n\nconst COMPONENT_NAME = 'TwBacktop'\n\nexport default defineComponent({\n  name: COMPONENT_NAME,\n  components: {\n    TwIcon,\n    CaretTop,\n  },\n  props: backtopProps,\n  emits: backtopEmits,\n\n  setup(props, { emit }) {\n    const ns = useNamespace('backtop')\n    const el = shallowRef<HTMLElement | undefined>(document.documentElement)\n    const container = shallowRef<Document | HTMLElement>(document)\n    const visible = ref(false)\n    const styleBottom = computed(() => `${props.bottom}px`)\n    const styleRight = computed(() => `${props.right}px`)\n\n    const scrollToTop = () => {\n      if (!el.value) return\n      const beginTime = Date.now()\n      const beginValue = el.value.scrollTop\n      const frameFunc = () => {\n        if (!el.value) return\n        const progress = (Date.now() - beginTime) / 500\n        if (progress < 1) {\n          el.value.scrollTop = beginValue * (1 - easeInOutCubic(progress))\n          requestAnimationFrame(frameFunc)\n        } else {\n          el.value.scrollTop = 0\n        }\n      }\n      requestAnimationFrame(frameFunc)\n    }\n    const handleScroll = () => {\n      if (el.value) visible.value = el.value.scrollTop >= props.visibilityHeight\n    }\n    const handleClick = (event: MouseEvent) => {\n      scrollToTop()\n      emit('click', event)\n    }\n\n    const handleScrollThrottled = useThrottleFn(handleScroll, 300)\n\n    onMounted(() => {\n      if (props.target) {\n        el.value =\n          document.querySelector<HTMLElement>(props.target) ?? undefined\n        if (!el.value) {\n          throwError(COMPONENT_NAME, `target is not existed: ${props.target}`)\n        }\n        container.value = el.value\n      }\n\n      useEventListener(container, 'scroll', handleScrollThrottled)\n    })\n\n    return {\n      visible,\n      styleBottom,\n      styleRight,\n      handleClick,\n      ns,\n    }\n  },\n})\n</script>\n"],"mappings":";;;;;;;;;;;AA4BA,MAAMA,cAAA,GAAiB;AAEvB,MAAKC,SAAA,GAAaC,eAAA,CAAa;EAC7BC,IAAA,EAAMH,cAAA;EACNI,UAAA,EAAY;IACVC,MAAA;IACAC;EAAA;EAEFC,KAAA,EAAOC,YAAA;EACPC,KAAA,EAAOC,YAAA;EAEPC,MAAMJ,KAAA,EAAO;IAAEK;EAAA,GAAQ;IACrB,MAAMC,EAAA,GAAKC,YAAA,CAAa;IACxB,MAAMC,EAAA,GAAKC,UAAA,CAAoCC,QAAA,CAASC,eAAA;IACxD,MAAMC,SAAA,GAAYH,UAAA,CAAmCC,QAAA;IACrD,MAAMG,OAAA,GAAUC,GAAA,CAAI;IACpB,MAAMC,WAAA,GAAcC,QAAA,CAAS,MAAM,GAAGhB,KAAA,CAAMiB,MAAA;IAC5C,MAAMC,UAAA,GAAaF,QAAA,CAAS,MAAM,GAAGhB,KAAA,CAAMmB,KAAA;IAE3C,MAAMC,WAAA,GAAcA,CAAA,KAAM;MACxB,IAAI,CAACZ,EAAA,CAAGa,KAAA,EAAO;MACf,MAAMC,SAAA,GAAYC,IAAA,CAAKC,GAAA;MACvB,MAAMC,UAAA,GAAajB,EAAA,CAAGa,KAAA,CAAMK,SAAA;MAC5B,MAAMC,SAAA,GAAYA,CAAA,KAAM;QACtB,IAAI,CAACnB,EAAA,CAAGa,KAAA,EAAO;QACf,MAAMO,QAAA,GAAY,CAAAL,IAAA,CAAKC,GAAA,KAAQF,SAAA,IAAa;QAC5C,IAAIM,QAAA,GAAW,GAAG;UAChBpB,EAAA,CAAGa,KAAA,CAAMK,SAAA,GAAYD,UAAA,QAAkBI,cAAA,CAAeD,QAAA;UACtDE,qBAAA,CAAsBH,SAAA;QAAA,OACjB;UACLnB,EAAA,CAAGa,KAAA,CAAMK,SAAA,GAAY;QAAA;MAAA;MAGzBI,qBAAA,CAAsBH,SAAA;IAAA;IAExB,MAAMI,YAAA,GAAeA,CAAA,KAAM;MACzB,IAAIvB,EAAA,CAAGa,KAAA,EAAOR,OAAA,CAAQQ,KAAA,GAAQb,EAAA,CAAGa,KAAA,CAAMK,SAAA,IAAa1B,KAAA,CAAMgC,gBAAA;IAAA;IAE5D,MAAMC,WAAA,GAAeC,KAAA,IAAsB;MACzCd,WAAA;MACAf,IAAA,CAAK,SAAS6B,KAAA;IAAA;IAGhB,MAAMC,qBAAA,GAAwBC,aAAA,CAAcL,YAAA,EAAc;IAE1DM,SAAA,CAAU,MAAM;MACd,IAAIC,EAAA;MACF,IAAAtC,KAAA,CAAAuC,MAAA;QAEA/B,EAAA,CAAAa,KAAQ,IAAAiB,EAAA,GAAA5B,QAAA,CAAA8B,aAAA,CAAAxC,KAAA,CAAAuC,MAAA,aAAAD,EAAA;QACN,KAAA9B,EAAA,CAAAa,KAAW;UAAgDoB,UAAA,CAAAhD,cAAA,4BAAAO,KAAA,CAAAuC,MAAA;QAE7D;QAAqB3B,SAAA,CAAAS,KAAA,GAAAb,EAAA,CAAAa,KAAA;MAGvB;MAAsCqB,gBAAA,CAAA9B,SAAA,YAAAuB,qBAAA;IAGxC;IAAO;MAELtB,OAAA;MACAE,WAAA;MACAG,UAAA;MACAe,WAAA;MAAA3B;IAAA;EAAA;;;;;EA1FoC,OAAAqC,SAAA,IAAAC,WAAA,CAAAC,UAAA;;;IAEvBC,OAAA,EAAAC,OAAA,Q;MACPC,GAAA;MAA6BC,KAAA,EAAAC,cAAA;QAAkB/B,KAAA,EAAAgC,IAAA,CAAAjC,UAAA;;;MAK/CkC,KAAA,EAAAC,cAAA,CAAAF,IAAA,CAAA7C,EAAA,CAAAgD,CAAA;;IAEN,IACwDC,UAAA,CAAAJ,IAAA,CAAAK,MAAA,wBAAlCC,WAAA,CAAAC,kBAAA;;;MAAwBZ,OAAA,EAAAC,OAAA,Q"},"metadata":{},"sourceType":"module","externalDependencies":[]}