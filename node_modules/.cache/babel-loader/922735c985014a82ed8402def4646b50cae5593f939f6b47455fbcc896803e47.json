{"ast":null,"code":"import { h } from 'vue';\nimport { TwCheckbox } from '../../checkbox/index.mjs';\nimport { TwIcon } from '../../icon/index.mjs';\nimport { ArrowRight, Loading } from '@element-plus/icons-vue';\nimport '../../../utils/index.mjs';\nimport { getPropByPath } from '../../../utils/objects.mjs';\nconst defaultClassNames = {\n  selection: \"table-column--selection\",\n  expand: \"table__expand-column\"\n};\nconst cellStarts = {\n  default: {\n    order: \"\"\n  },\n  selection: {\n    width: 48,\n    minWidth: 48,\n    realWidth: 48,\n    order: \"\"\n  },\n  expand: {\n    width: 48,\n    minWidth: 48,\n    realWidth: 48,\n    order: \"\"\n  },\n  index: {\n    width: 48,\n    minWidth: 48,\n    realWidth: 48,\n    order: \"\"\n  }\n};\nconst getDefaultClassName = type => {\n  return defaultClassNames[type] || \"\";\n};\nconst cellForced = {\n  selection: {\n    renderHeader({\n      store\n    }) {\n      function isDisabled() {\n        return store.states.data.value && store.states.data.value.length === 0;\n      }\n      return h(TwCheckbox, {\n        disabled: isDisabled(),\n        size: store.states.tableSize.value,\n        indeterminate: store.states.selection.value.length > 0 && !store.states.isAllSelected.value,\n        \"onUpdate:modelValue\": store.toggleAllSelection,\n        modelValue: store.states.isAllSelected.value\n      });\n    },\n    renderCell({\n      row,\n      column,\n      store,\n      $index\n    }) {\n      return h(TwCheckbox, {\n        disabled: column.selectable ? !column.selectable.call(null, row, $index) : false,\n        size: store.states.tableSize.value,\n        onChange: () => {\n          store.commit(\"rowSelectedChanged\", row);\n        },\n        onClick: event => event.stopPropagation(),\n        modelValue: store.isSelected(row)\n      });\n    },\n    sortable: false,\n    resizable: false\n  },\n  index: {\n    renderHeader({\n      column\n    }) {\n      return column.label || \"#\";\n    },\n    renderCell({\n      column,\n      $index\n    }) {\n      let i = $index + 1;\n      const index = column.index;\n      if (typeof index === \"number\") {\n        i = $index + index;\n      } else if (typeof index === \"function\") {\n        i = index($index);\n      }\n      return h(\"div\", {}, [i]);\n    },\n    sortable: false\n  },\n  expand: {\n    renderHeader({\n      column\n    }) {\n      return column.label || \"\";\n    },\n    renderCell({\n      row,\n      store\n    }) {\n      const {\n        ns\n      } = store;\n      const classes = [ns.e(\"expand-icon\")];\n      if (store.states.expandRows.value.indexOf(row) > -1) {\n        classes.push(ns.em(\"expand-icon\", \"expanded\"));\n      }\n      const callback = function (e) {\n        e.stopPropagation();\n        store.toggleRowExpansion(row);\n      };\n      return h(\"div\", {\n        class: classes,\n        onClick: callback\n      }, {\n        default: () => {\n          return [h(TwIcon, null, {\n            default: () => {\n              return [h(ArrowRight)];\n            }\n          })];\n        }\n      });\n    },\n    sortable: false,\n    resizable: false\n  }\n};\nfunction defaultRenderCell({\n  row,\n  column,\n  $index\n}) {\n  var _a;\n  const property = column.property;\n  const value = property && getPropByPath(row, property, false).v;\n  if (column && column.formatter) {\n    return column.formatter(row, column, value, $index);\n  }\n  return ((_a = value == null ? void 0 : value.toString) == null ? void 0 : _a.call(value)) || \"\";\n}\nfunction treeCellPrefix({\n  row,\n  treeNode,\n  store\n}) {\n  if (!treeNode) return null;\n  const ele = [];\n  const callback = function (e) {\n    e.stopPropagation();\n    store.loadOrToggle(row);\n  };\n  const {\n    ns\n  } = store;\n  if (treeNode.indent) {\n    ele.push(h(\"span\", {\n      class: ns.e(\"indent\"),\n      style: {\n        \"padding-left\": `${treeNode.indent}px`\n      }\n    }));\n  }\n  if (typeof treeNode.expanded === \"boolean\" && !treeNode.noLazyChildren) {\n    const expandClasses = [ns.e(\"expand-icon\"), treeNode.expanded ? ns.em(\"expand-icon\", \"expanded\") : \"\"];\n    let icon = ArrowRight;\n    if (treeNode.loading) {\n      icon = Loading;\n    }\n    ele.push(h(\"div\", {\n      class: expandClasses,\n      onClick: callback\n    }, {\n      default: () => {\n        return [h(TwIcon, {\n          class: {\n            [ns.is(\"loading\")]: treeNode.loading\n          }\n        }, {\n          default: () => [h(icon)]\n        })];\n      }\n    }));\n  } else {\n    ele.push(h(\"span\", {\n      class: ns.e(\"placeholder\")\n    }));\n  }\n  return ele;\n}\nexport { cellForced, cellStarts, defaultRenderCell, getDefaultClassName, treeCellPrefix };","map":{"version":3,"names":["defaultClassNames","selection","expand","cellStarts","default","order","width","minWidth","realWidth","index","getDefaultClassName","type","cellForced","renderHeader","store","isDisabled","states","data","value","length","h","TwCheckbox","disabled","size","tableSize","indeterminate","isAllSelected","toggleAllSelection","modelValue","renderCell","row","column","$index","selectable","call","onChange","commit","onClick","event","stopPropagation","isSelected","sortable","resizable","label","i","ns","classes","e","expandRows","indexOf","push","em","callback","toggleRowExpansion","class","TwIcon","ArrowRight","defaultRenderCell","_a","property","getPropByPath","v","formatter","toString","treeCellPrefix","treeNode","ele","loadOrToggle","indent","style","expanded","noLazyChildren","expandClasses","icon","loading","Loading","is"],"sources":["/home/bonami/Desktop/Projects/ECommerce/packages/components/table/src/config.ts"],"sourcesContent":["import { h } from 'vue'\nimport TwCheckbox from '@tw-element/components/checkbox'\nimport { TwIcon } from '@tw-element/components/icon'\nimport { ArrowRight, Loading } from '@element-plus/icons-vue'\nimport { getPropByPath } from '@tw-element/utils'\n\nimport type { VNode } from 'vue'\nimport type { TableColumnCtx } from './table-column/defaults'\nimport type { Store } from './store'\nimport type { TreeNode } from './table/defaults'\n\nconst defaultClassNames = {\n  selection: 'table-column--selection',\n  expand: 'table__expand-column',\n}\n\nexport const cellStarts = {\n  default: {\n    order: '',\n  },\n  selection: {\n    width: 48,\n    minWidth: 48,\n    realWidth: 48,\n    order: '',\n  },\n  expand: {\n    width: 48,\n    minWidth: 48,\n    realWidth: 48,\n    order: '',\n  },\n  index: {\n    width: 48,\n    minWidth: 48,\n    realWidth: 48,\n    order: '',\n  },\n}\n\nexport const getDefaultClassName = (type) => {\n  return defaultClassNames[type] || ''\n}\n\n// 这些选项不应该被覆盖\nexport const cellForced = {\n  selection: {\n    renderHeader<T>({ store }: { store: Store<T> }) {\n      function isDisabled() {\n        return store.states.data.value && store.states.data.value.length === 0\n      }\n      return h(TwCheckbox, {\n        disabled: isDisabled(),\n        size: store.states.tableSize.value,\n        indeterminate:\n          store.states.selection.value.length > 0 &&\n          !store.states.isAllSelected.value,\n        'onUpdate:modelValue': store.toggleAllSelection,\n        modelValue: store.states.isAllSelected.value,\n      })\n    },\n    renderCell<T>({\n      row,\n      column,\n      store,\n      $index,\n    }: {\n      row: T\n      column: TableColumnCtx<T>\n      store: Store<T>\n      $index: string\n    }) {\n      return h(TwCheckbox, {\n        disabled: column.selectable\n          ? !column.selectable.call(null, row, $index)\n          : false,\n        size: store.states.tableSize.value,\n        onChange: () => {\n          store.commit('rowSelectedChanged', row)\n        },\n        onClick: (event: Event) => event.stopPropagation(),\n        modelValue: store.isSelected(row),\n      })\n    },\n    sortable: false,\n    resizable: false,\n  },\n  index: {\n    renderHeader<T>({ column }: { column: TableColumnCtx<T> }) {\n      return column.label || '#'\n    },\n    renderCell<T>({\n      column,\n      $index,\n    }: {\n      column: TableColumnCtx<T>\n      $index: number\n    }) {\n      let i = $index + 1\n      const index = column.index\n\n      if (typeof index === 'number') {\n        i = $index + index\n      } else if (typeof index === 'function') {\n        i = index($index)\n      }\n      return h('div', {}, [i])\n    },\n    sortable: false,\n  },\n  expand: {\n    renderHeader<T>({ column }: { column: TableColumnCtx<T> }) {\n      return column.label || ''\n    },\n    renderCell<T>({ row, store }: { row: T; store: Store<T> }) {\n      const { ns } = store\n      const classes = [ns.e('expand-icon')]\n      if (store.states.expandRows.value.indexOf(row) > -1) {\n        classes.push(ns.em('expand-icon', 'expanded'))\n      }\n      const callback = function (e: Event) {\n        e.stopPropagation()\n        store.toggleRowExpansion(row)\n      }\n      return h(\n        'div',\n        {\n          class: classes,\n          onClick: callback,\n        },\n        {\n          default: () => {\n            return [\n              h(TwIcon, null, {\n                default: () => {\n                  return [h(ArrowRight)]\n                },\n              }),\n            ]\n          },\n        }\n      )\n    },\n    sortable: false,\n    resizable: false,\n  },\n}\n\nexport function defaultRenderCell<T>({\n  row,\n  column,\n  $index,\n}: {\n  row: T\n  column: TableColumnCtx<T>\n  $index: number\n}) {\n  const property = column.property\n  const value = property && getPropByPath(row, property, false).v\n  if (column && column.formatter) {\n    return column.formatter(row, column, value, $index)\n  }\n  return value?.toString?.() || ''\n}\n\nexport function treeCellPrefix<T>({\n  row,\n  treeNode,\n  store,\n}: {\n  row: T\n  treeNode: TreeNode\n  store: Store<T>\n}) {\n  if (!treeNode) return null\n  const ele: VNode[] = []\n  const callback = function (e) {\n    e.stopPropagation()\n    store.loadOrToggle(row)\n  }\n  const { ns } = store\n  if (treeNode.indent) {\n    ele.push(\n      h('span', {\n        class: ns.e('indent'),\n        style: { 'padding-left': `${treeNode.indent}px` },\n      })\n    )\n  }\n  if (typeof treeNode.expanded === 'boolean' && !treeNode.noLazyChildren) {\n    const expandClasses = [\n      ns.e('expand-icon'),\n      treeNode.expanded ? ns.em('expand-icon', 'expanded') : '',\n    ]\n    let icon = ArrowRight\n    if (treeNode.loading) {\n      icon = Loading\n    }\n\n    ele.push(\n      h(\n        'div',\n        {\n          class: expandClasses,\n          onClick: callback,\n        },\n        {\n          default: () => {\n            return [\n              h(\n                TwIcon,\n                { class: { [ns.is('loading')]: treeNode.loading } },\n                {\n                  default: () => [h(icon)],\n                }\n              ),\n            ]\n          },\n        }\n      )\n    )\n  } else {\n    ele.push(\n      h('span', {\n        class: ns.e('placeholder'),\n      })\n    )\n  }\n  return ele\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}