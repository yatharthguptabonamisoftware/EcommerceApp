{"ast":null,"code":"import { defineComponent, getCurrentInstance, computed, inject, ref, reactive, watch, provide, onMounted, onBeforeUnmount, h, Fragment, withDirectives, vShow } from 'vue';\nimport { useTimeoutFn } from '@vueuse/core';\nimport _CollapseTransition from '../../collapse-transition/index.mjs';\nimport { TwTooltip } from '../../tooltip/index.mjs';\nimport '../../../utils/index.mjs';\nimport { ArrowDown, ArrowRight } from '@element-plus/icons-vue';\nimport { TwIcon } from '../../icon/index.mjs';\nimport useMenu from './use-menu.mjs';\nimport { useMenuCssVar } from './use-menu-css-var.mjs';\nimport { buildProps } from '../../../utils/vue/props.mjs';\nimport { throwError } from '../../../utils/error.mjs';\nconst subMenuProps = buildProps({\n  index: {\n    type: String,\n    required: true\n  },\n  showTimeout: {\n    type: Number,\n    default: 300\n  },\n  hideTimeout: {\n    type: Number,\n    default: 300\n  },\n  popperClass: String,\n  disabled: Boolean,\n  popperAppendToBody: {\n    type: Boolean,\n    default: void 0\n  }\n});\nconst COMPONENT_NAME = \"TwSubMenu\";\nvar SubMenu = defineComponent({\n  name: COMPONENT_NAME,\n  props: subMenuProps,\n  setup(props, {\n    slots,\n    expose\n  }) {\n    const instance = getCurrentInstance();\n    const {\n      paddingStyle,\n      indexPath,\n      parentMenu\n    } = useMenu(instance, computed(() => props.index));\n    const rootMenu = inject(\"rootMenu\");\n    if (!rootMenu) throwError(COMPONENT_NAME, \"can not inject root menu\");\n    const subMenu = inject(`subMenu:${parentMenu.value.uid}`);\n    if (!subMenu) throwError(COMPONENT_NAME, \"can not inject sub menu\");\n    const items = ref({});\n    const subMenus = ref({});\n    let timeout;\n    const mouseInChild = ref(false);\n    const verticalTitleRef = ref();\n    const vPopper = ref(null);\n    const currentPlacement = computed(() => mode.value === \"horizontal\" && isFirstLevel.value ? \"bottom-start\" : \"right-start\");\n    const subMenuTitleIcon = computed(() => {\n      return mode.value === \"horizontal\" && isFirstLevel.value || mode.value === \"vertical\" && !rootMenu.props.collapse ? ArrowDown : ArrowRight;\n    });\n    const isFirstLevel = computed(() => {\n      let isFirstLevel2 = true;\n      let parent = instance.parent;\n      while (parent && parent.type.name !== \"TwMenu\") {\n        if ([\"TwSubMenu\", \"TwMenuItemGroup\"].includes(parent.type.name)) {\n          isFirstLevel2 = false;\n          break;\n        } else {\n          parent = parent.parent;\n        }\n      }\n      return isFirstLevel2;\n    });\n    const appendToBody = computed(() => {\n      return props.popperAppendToBody === void 0 ? isFirstLevel.value : Boolean(props.popperAppendToBody);\n    });\n    const menuTransitionName = computed(() => rootMenu.props.collapse ? \"el-zoom-in-left\" : \"el-zoom-in-top\");\n    const fallbackPlacements = computed(() => mode.value === \"horizontal\" && isFirstLevel.value ? [\"bottom-start\", \"bottom-end\", \"top-start\", \"top-end\", \"right-start\", \"left-start\"] : [\"right-start\", \"left-start\", \"bottom-start\", \"bottom-end\", \"top-start\", \"top-end\"]);\n    const opened = computed(() => rootMenu.openedMenus.includes(props.index));\n    const active = computed(() => {\n      let isActive = false;\n      Object.values(items.value).forEach(item2 => {\n        if (item2.active) {\n          isActive = true;\n        }\n      });\n      Object.values(subMenus.value).forEach(subItem => {\n        if (subItem.active) {\n          isActive = true;\n        }\n      });\n      return isActive;\n    });\n    const backgroundColor = computed(() => rootMenu.props.backgroundColor || \"\");\n    const activeTextColor = computed(() => rootMenu.props.activeTextColor || \"\");\n    const textColor = computed(() => rootMenu.props.textColor || \"\");\n    const mode = computed(() => rootMenu.props.mode);\n    const item = reactive({\n      index: props.index,\n      indexPath,\n      active\n    });\n    const titleStyle = computed(() => {\n      if (mode.value !== \"horizontal\") {\n        return {\n          color: textColor.value\n        };\n      }\n      return {\n        borderBottomColor: active.value ? rootMenu.props.activeTextColor ? activeTextColor.value : \"\" : \"transparent\",\n        color: active.value ? activeTextColor.value : textColor.value\n      };\n    });\n    const doDestroy = () => {\n      var _a, _b, _c;\n      return (_c = (_b = (_a = vPopper.value) == null ? void 0 : _a.popperRef) == null ? void 0 : _b.popperInstanceRef) == null ? void 0 : _c.destroy();\n    };\n    const handleCollapseToggle = value => {\n      if (!value) {\n        doDestroy();\n      }\n    };\n    const handleClick = () => {\n      if (rootMenu.props.menuTrigger === \"hover\" && rootMenu.props.mode === \"horizontal\" || rootMenu.props.collapse && rootMenu.props.mode === \"vertical\" || props.disabled) return;\n      rootMenu.handleSubMenuClick({\n        index: props.index,\n        indexPath: indexPath.value,\n        active: active.value\n      });\n    };\n    const handleMouseenter = (event, showTimeout = props.showTimeout) => {\n      var _a;\n      if (event.type === \"focus\" && !event.relatedTarget) {\n        return;\n      }\n      if (rootMenu.props.menuTrigger === \"click\" && rootMenu.props.mode === \"horizontal\" || !rootMenu.props.collapse && rootMenu.props.mode === \"vertical\" || props.disabled) {\n        return;\n      }\n      subMenu.mouseInChild.value = true;\n      timeout == null ? void 0 : timeout();\n      ({\n        stop: timeout\n      } = useTimeoutFn(() => {\n        rootMenu.openMenu(props.index, indexPath.value);\n      }, showTimeout));\n      if (appendToBody.value) {\n        (_a = parentMenu.value.vnode.el) == null ? void 0 : _a.dispatchEvent(new MouseEvent(\"mouseenter\"));\n      }\n    };\n    const handleMouseleave = (deepDispatch = false) => {\n      var _a, _b;\n      if (rootMenu.props.menuTrigger === \"click\" && rootMenu.props.mode === \"horizontal\" || !rootMenu.props.collapse && rootMenu.props.mode === \"vertical\") {\n        return;\n      }\n      timeout == null ? void 0 : timeout();\n      subMenu.mouseInChild.value = false;\n      ({\n        stop: timeout\n      } = useTimeoutFn(() => !mouseInChild.value && rootMenu.closeMenu(props.index, indexPath.value), props.hideTimeout));\n      if (appendToBody.value && deepDispatch) {\n        if (((_a = instance.parent) == null ? void 0 : _a.type.name) === \"TwSubMenu\") {\n          (_b = subMenu.handleMouseleave) == null ? void 0 : _b.call(subMenu, true);\n        }\n      }\n    };\n    watch(() => rootMenu.props.collapse, value => handleCollapseToggle(Boolean(value)));\n    {\n      const addSubMenu = item2 => {\n        subMenus.value[item2.index] = item2;\n      };\n      const removeSubMenu = item2 => {\n        delete subMenus.value[item2.index];\n      };\n      provide(`subMenu:${instance.uid}`, {\n        addSubMenu,\n        removeSubMenu,\n        handleMouseleave,\n        mouseInChild\n      });\n    }\n    expose({\n      opened\n    });\n    onMounted(() => {\n      rootMenu.addSubMenu(item);\n      subMenu.addSubMenu(item);\n    });\n    onBeforeUnmount(() => {\n      subMenu.removeSubMenu(item);\n      rootMenu.removeSubMenu(item);\n    });\n    return () => {\n      var _a;\n      const titleTag = [(_a = slots.title) == null ? void 0 : _a.call(slots), h(TwIcon, {\n        class: [\"el-sub-menu__icon-arrow\"]\n      }, {\n        default: () => h(subMenuTitleIcon.value)\n      })];\n      const ulStyle = useMenuCssVar(rootMenu.props);\n      const child = rootMenu.isMenuPopup ? h(TwTooltip, {\n        ref: vPopper,\n        visible: opened.value,\n        effect: \"light\",\n        pure: true,\n        offset: 6,\n        showArrow: false,\n        persistent: true,\n        popperClass: props.popperClass,\n        placement: currentPlacement.value,\n        teleported: appendToBody.value,\n        fallbackPlacements: fallbackPlacements.value,\n        transition: menuTransitionName.value,\n        gpuAcceleration: false\n      }, {\n        content: () => {\n          var _a2;\n          return h(\"div\", {\n            class: [`el-menu--${mode.value}`, props.popperClass],\n            onMouseenter: evt => handleMouseenter(evt, 100),\n            onMouseleave: () => handleMouseleave(true),\n            onFocus: evt => handleMouseenter(evt, 100)\n          }, [h(\"ul\", {\n            class: [\"el-menu el-menu--popup\", `el-menu--popup-${currentPlacement.value}`],\n            style: ulStyle.value\n          }, [(_a2 = slots.default) == null ? void 0 : _a2.call(slots)])]);\n        },\n        default: () => h(\"div\", {\n          class: \"el-sub-menu__title\",\n          style: [paddingStyle.value, titleStyle.value, {\n            backgroundColor: backgroundColor.value\n          }],\n          onClick: handleClick\n        }, titleTag)\n      }) : h(Fragment, {}, [h(\"div\", {\n        class: \"el-sub-menu__title\",\n        style: [paddingStyle.value, titleStyle.value, {\n          backgroundColor: backgroundColor.value\n        }],\n        ref: verticalTitleRef,\n        onClick: handleClick\n      }, titleTag), h(_CollapseTransition, {}, {\n        default: () => {\n          var _a2;\n          return withDirectives(h(\"ul\", {\n            role: \"menu\",\n            class: \"el-menu el-menu--inline\",\n            style: ulStyle.value\n          }, [(_a2 = slots.default) == null ? void 0 : _a2.call(slots)]), [[vShow, opened.value]]);\n        }\n      })]);\n      return h(\"li\", {\n        class: [\"el-sub-menu\", {\n          \"is-active\": active.value,\n          \"is-opened\": opened.value,\n          \"is-disabled\": props.disabled\n        }],\n        role: \"menuitem\",\n        ariaHaspopup: true,\n        ariaExpanded: opened.value,\n        onMouseenter: handleMouseenter,\n        onMouseleave: () => handleMouseleave(true),\n        onFocus: handleMouseenter\n      }, [child]);\n    };\n  }\n});\nexport { SubMenu as default, subMenuProps };","map":{"version":3,"names":["subMenuProps","buildProps","index","type","String","required","showTimeout","Number","default","hideTimeout","popperClass","disabled","Boolean","popperAppendToBody","COMPONENT_NAME","SubMenu","defineComponent","name","props","setup","slots","expose","instance","getCurrentInstance","paddingStyle","indexPath","parentMenu","useMenu","computed","rootMenu","inject","throwError","subMenu","value","uid","items","ref","subMenus","timeout","mouseInChild","verticalTitleRef","vPopper","currentPlacement","mode","isFirstLevel","subMenuTitleIcon","collapse","ArrowDown","ArrowRight","isFirstLevel2","parent","includes","appendToBody","menuTransitionName","fallbackPlacements","opened","openedMenus","active","isActive","Object","values","forEach","item2","subItem","backgroundColor","activeTextColor","textColor","item","reactive","titleStyle","color","borderBottomColor","doDestroy","_a","_b","_c","popperRef","popperInstanceRef","destroy","handleCollapseToggle","handleClick","menuTrigger","handleSubMenuClick","handleMouseenter","event","relatedTarget","stop","useTimeoutFn","openMenu","vnode","el","dispatchEvent","MouseEvent","handleMouseleave","deepDispatch","closeMenu","call","watch","addSubMenu","removeSubMenu","provide","onMounted","onBeforeUnmount","titleTag","title","h","TwIcon","class","ulStyle","useMenuCssVar","child","isMenuPopup","TwTooltip","visible","effect","pure","offset","showArrow","persistent","placement","teleported","transition","gpuAcceleration","content","_a2","onMouseenter","evt","onMouseleave","onFocus","style","onClick","Fragment","_CollapseTransition","withDirectives","role","vShow","ariaHaspopup","ariaExpanded"],"sources":["/home/bonami/Desktop/Projects/ECommerce/packages/components/menu/src/sub-menu.ts"],"sourcesContent":["import {\n  defineComponent,\n  computed,\n  ref,\n  provide,\n  inject,\n  getCurrentInstance,\n  watch,\n  onMounted,\n  onBeforeUnmount,\n  withDirectives,\n  Fragment,\n  vShow,\n  h,\n  reactive,\n} from 'vue'\nimport { useTimeoutFn } from '@vueuse/core'\nimport TwCollapseTransition from '@tw-element/components/collapse-transition'\nimport ElTooltip from '@tw-element/components/tooltip'\nimport { buildProps, throwError } from '@tw-element/utils'\nimport { ArrowDown, ArrowRight } from '@element-plus/icons-vue'\nimport { TwIcon } from '@tw-element/components/icon'\nimport useMenu from './use-menu'\nimport { useMenuCssVar } from './use-menu-css-var'\n\nimport type { Placement } from '@tw-element/components/popper'\nimport type { ExtractPropTypes, VNodeArrayChildren, CSSProperties } from 'vue'\nimport type { MenuProvider, SubMenuProvider } from './types'\n\nexport const subMenuProps = buildProps({\n  index: {\n    type: String,\n    required: true,\n  },\n  showTimeout: {\n    type: Number,\n    default: 300,\n  },\n  hideTimeout: {\n    type: Number,\n    default: 300,\n  },\n  popperClass: String,\n  disabled: Boolean,\n  popperAppendToBody: {\n    type: Boolean,\n    default: undefined,\n  },\n} as const)\nexport type SubMenuProps = ExtractPropTypes<typeof subMenuProps>\n\nconst COMPONENT_NAME = 'TwSubMenu'\nexport default defineComponent({\n  name: COMPONENT_NAME,\n  props: subMenuProps,\n\n  setup(props, { slots, expose }) {\n    const instance = getCurrentInstance()!\n    const { paddingStyle, indexPath, parentMenu } = useMenu(\n      instance,\n      computed(() => props.index)\n    )\n\n    // inject\n    const rootMenu = inject<MenuProvider>('rootMenu')\n    if (!rootMenu) throwError(COMPONENT_NAME, 'can not inject root menu')\n\n    const subMenu = inject<SubMenuProvider>(`subMenu:${parentMenu.value!.uid}`)\n    if (!subMenu) throwError(COMPONENT_NAME, 'can not inject sub menu')\n\n    const items = ref<MenuProvider['items']>({})\n    const subMenus = ref<MenuProvider['subMenus']>({})\n\n    let timeout: (() => void) | undefined\n    const mouseInChild = ref(false)\n    const verticalTitleRef = ref<HTMLDivElement>()\n    const vPopper = ref<InstanceType<typeof ElTooltip> | null>(null)\n\n    // computed\n    const currentPlacement = computed<Placement>(() =>\n      mode.value === 'horizontal' && isFirstLevel.value\n        ? 'bottom-start'\n        : 'right-start'\n    )\n    const subMenuTitleIcon = computed(() => {\n      return (mode.value === 'horizontal' && isFirstLevel.value) ||\n        (mode.value === 'vertical' && !rootMenu.props.collapse)\n        ? ArrowDown\n        : ArrowRight\n    })\n    const isFirstLevel = computed(() => {\n      let isFirstLevel = true\n      let parent = instance.parent\n      while (parent && parent.type.name !== 'TwMenu') {\n        if (['TwSubMenu', 'TwMenuItemGroup'].includes(parent.type.name!)) {\n          isFirstLevel = false\n          break\n        } else {\n          parent = parent.parent\n        }\n      }\n      return isFirstLevel\n    })\n    const appendToBody = computed(() => {\n      return props.popperAppendToBody === undefined\n        ? isFirstLevel.value\n        : Boolean(props.popperAppendToBody)\n    })\n    const menuTransitionName = computed(() =>\n      rootMenu.props.collapse ? 'el-zoom-in-left' : 'el-zoom-in-top'\n    )\n    const fallbackPlacements = computed<Placement[]>(() =>\n      mode.value === 'horizontal' && isFirstLevel.value\n        ? [\n            'bottom-start',\n            'bottom-end',\n            'top-start',\n            'top-end',\n            'right-start',\n            'left-start',\n          ]\n        : [\n            'right-start',\n            'left-start',\n            'bottom-start',\n            'bottom-end',\n            'top-start',\n            'top-end',\n          ]\n    )\n    const opened = computed(() => rootMenu.openedMenus.includes(props.index))\n    const active = computed(() => {\n      let isActive = false\n\n      Object.values(items.value).forEach((item) => {\n        if (item.active) {\n          isActive = true\n        }\n      })\n\n      Object.values(subMenus.value).forEach((subItem) => {\n        if (subItem.active) {\n          isActive = true\n        }\n      })\n\n      return isActive\n    })\n\n    const backgroundColor = computed(() => rootMenu.props.backgroundColor || '')\n    const activeTextColor = computed(() => rootMenu.props.activeTextColor || '')\n    const textColor = computed(() => rootMenu.props.textColor || '')\n    const mode = computed(() => rootMenu.props.mode)\n    const item = reactive({\n      index: props.index,\n      indexPath,\n      active,\n    })\n\n    const titleStyle = computed<CSSProperties>(() => {\n      if (mode.value !== 'horizontal') {\n        return {\n          color: textColor.value,\n        }\n      }\n      return {\n        borderBottomColor: active.value\n          ? rootMenu.props.activeTextColor\n            ? activeTextColor.value\n            : ''\n          : 'transparent',\n        color: active.value ? activeTextColor.value : textColor.value,\n      }\n    })\n\n    // methods\n    const doDestroy = () =>\n      vPopper.value?.popperRef?.popperInstanceRef?.destroy()\n\n    const handleCollapseToggle = (value: boolean) => {\n      if (!value) {\n        doDestroy()\n      }\n    }\n\n    const handleClick = () => {\n      if (\n        (rootMenu.props.menuTrigger === 'hover' &&\n          rootMenu.props.mode === 'horizontal') ||\n        (rootMenu.props.collapse && rootMenu.props.mode === 'vertical') ||\n        props.disabled\n      )\n        return\n\n      rootMenu.handleSubMenuClick({\n        index: props.index,\n        indexPath: indexPath.value,\n        active: active.value,\n      })\n    }\n\n    const handleMouseenter = (\n      event: MouseEvent | FocusEvent,\n      showTimeout = props.showTimeout\n    ) => {\n      if (event.type === 'focus' && !event.relatedTarget) {\n        return\n      }\n      if (\n        (rootMenu.props.menuTrigger === 'click' &&\n          rootMenu.props.mode === 'horizontal') ||\n        (!rootMenu.props.collapse && rootMenu.props.mode === 'vertical') ||\n        props.disabled\n      ) {\n        return\n      }\n      subMenu.mouseInChild.value = true\n\n      timeout?.()\n      ;({ stop: timeout } = useTimeoutFn(() => {\n        rootMenu.openMenu(props.index, indexPath.value)\n      }, showTimeout))\n\n      if (appendToBody.value) {\n        parentMenu.value.vnode.el?.dispatchEvent(new MouseEvent('mouseenter'))\n      }\n    }\n\n    const handleMouseleave = (deepDispatch = false) => {\n      if (\n        (rootMenu.props.menuTrigger === 'click' &&\n          rootMenu.props.mode === 'horizontal') ||\n        (!rootMenu.props.collapse && rootMenu.props.mode === 'vertical')\n      ) {\n        return\n      }\n      timeout?.()\n      subMenu.mouseInChild.value = false\n      ;({ stop: timeout } = useTimeoutFn(\n        () =>\n          !mouseInChild.value &&\n          rootMenu.closeMenu(props.index, indexPath.value),\n        props.hideTimeout\n      ))\n\n      if (appendToBody.value && deepDispatch) {\n        if (instance.parent?.type.name === 'TwSubMenu') {\n          subMenu.handleMouseleave?.(true)\n        }\n      }\n    }\n\n    watch(\n      () => rootMenu.props.collapse,\n      (value) => handleCollapseToggle(Boolean(value))\n    )\n\n    // provide\n    {\n      const addSubMenu: SubMenuProvider['addSubMenu'] = (item) => {\n        subMenus.value[item.index] = item\n      }\n      const removeSubMenu: SubMenuProvider['removeSubMenu'] = (item) => {\n        delete subMenus.value[item.index]\n      }\n      provide<SubMenuProvider>(`subMenu:${instance.uid}`, {\n        addSubMenu,\n        removeSubMenu,\n        handleMouseleave,\n        mouseInChild,\n      })\n    }\n\n    // expose\n    expose({\n      opened,\n    })\n\n    // lifecycle\n    onMounted(() => {\n      rootMenu.addSubMenu(item)\n      subMenu.addSubMenu(item)\n    })\n\n    onBeforeUnmount(() => {\n      subMenu.removeSubMenu(item)\n      rootMenu.removeSubMenu(item)\n    })\n\n    return () => {\n      const titleTag: VNodeArrayChildren = [\n        slots.title?.(),\n        h(\n          TwIcon,\n          {\n            class: ['el-sub-menu__icon-arrow'],\n          },\n          { default: () => h(subMenuTitleIcon.value) }\n        ),\n      ]\n\n      const ulStyle = useMenuCssVar(rootMenu.props)\n\n      // this render function is only used for bypass `Vue`'s compiler caused patching issue.\n      // temporarily mark TwPopper as any due to type inconsistency.\n      const child = rootMenu.isMenuPopup\n        ? h(\n            // TODO: correct popper's type.\n            ElTooltip as any,\n            {\n              ref: vPopper,\n              visible: opened.value,\n              effect: 'light',\n              pure: true,\n              offset: 6,\n              showArrow: false,\n              persistent: true,\n              popperClass: props.popperClass,\n              placement: currentPlacement.value,\n              teleported: appendToBody.value,\n              fallbackPlacements: fallbackPlacements.value,\n              transition: menuTransitionName.value,\n              gpuAcceleration: false,\n            },\n            {\n              content: () =>\n                h(\n                  'div',\n                  {\n                    class: [`el-menu--${mode.value}`, props.popperClass],\n                    onMouseenter: (evt: MouseEvent) =>\n                      handleMouseenter(evt, 100),\n                    onMouseleave: () => handleMouseleave(true),\n                    onFocus: (evt: FocusEvent) => handleMouseenter(evt, 100),\n                  },\n                  [\n                    h(\n                      'ul',\n                      {\n                        class: [\n                          'el-menu el-menu--popup',\n                          `el-menu--popup-${currentPlacement.value}`,\n                        ],\n                        style: ulStyle.value,\n                      },\n                      [slots.default?.()]\n                    ),\n                  ]\n                ),\n              default: () =>\n                h(\n                  'div',\n                  {\n                    class: 'el-sub-menu__title',\n                    style: [\n                      paddingStyle.value,\n                      titleStyle.value,\n                      { backgroundColor: backgroundColor.value },\n                    ],\n                    onClick: handleClick,\n                  },\n                  titleTag\n                ),\n            }\n          )\n        : h(Fragment, {}, [\n            h(\n              'div',\n              {\n                class: 'el-sub-menu__title',\n                style: [\n                  paddingStyle.value,\n                  titleStyle.value,\n                  { backgroundColor: backgroundColor.value },\n                ],\n                ref: verticalTitleRef,\n                onClick: handleClick,\n              },\n              titleTag\n            ),\n            h(\n              TwCollapseTransition,\n              {},\n              {\n                default: () =>\n                  withDirectives(\n                    h(\n                      'ul',\n                      {\n                        role: 'menu',\n                        class: 'el-menu el-menu--inline',\n                        style: ulStyle.value,\n                      },\n                      [slots.default?.()]\n                    ),\n                    [[vShow, opened.value]]\n                  ),\n              }\n            ),\n          ])\n\n      return h(\n        'li',\n        {\n          class: [\n            'el-sub-menu',\n            {\n              'is-active': active.value,\n              'is-opened': opened.value,\n              'is-disabled': props.disabled,\n            },\n          ],\n          role: 'menuitem',\n          ariaHaspopup: true,\n          ariaExpanded: opened.value,\n          onMouseenter: handleMouseenter,\n          onMouseleave: () => handleMouseleave(true),\n          onFocus: handleMouseenter,\n        },\n        [child]\n      )\n    }\n  },\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}