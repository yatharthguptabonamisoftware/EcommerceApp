{"ast":null,"code":"import { defineComponent, inject, watch, resolveComponent, openBlock, createBlock, mergeProps, withCtx, renderSlot, createCommentVNode } from 'vue';\nimport '../../slot/index.mjs';\nimport '../../../hooks/index.mjs';\nimport { usePopperTriggerProps } from './popper.mjs';\nimport { POPPER_INJECTION_KEY } from './tokens.mjs';\nimport { unwrapMeasurableEl } from './utils.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport OnlyChild from '../../slot/src/only-child.mjs';\nimport { useForwardRef } from '../../../hooks/use-forward-ref/index.mjs';\nconst _sfc_main = defineComponent({\n  name: \"TwPopperTrigger\",\n  components: {\n    ElOnlyChild: OnlyChild\n  },\n  inheritAttrs: false,\n  props: {\n    ...usePopperTriggerProps,\n    onMouseenter: Function,\n    onMouseleave: Function,\n    onClick: Function,\n    onKeydown: Function,\n    onFocus: Function,\n    onBlur: Function,\n    onContextmenu: Function,\n    id: String,\n    open: Boolean\n  },\n  setup(props) {\n    const {\n      triggerRef\n    } = inject(POPPER_INJECTION_KEY, void 0);\n    useForwardRef(triggerRef);\n    watch(() => props.virtualRef, val => {\n      if (val) {\n        triggerRef.value = unwrapMeasurableEl(val);\n      }\n    }, {\n      immediate: true\n    });\n    watch(() => triggerRef.value, (el, prevEl) => {\n      if (el && el instanceof HTMLElement) {\n        ;\n        [\"onMouseenter\", \"onMouseleave\", \"onClick\", \"onKeydown\", \"onFocus\", \"onBlur\", \"onContextmenu\"].forEach(eventName => {\n          const handler = props[eventName];\n          if (handler) {\n            ;\n            el.addEventListener(eventName.slice(2).toLowerCase(), handler);\n            prevEl == null ? void 0 : prevEl.removeEventListener(eventName.slice(2).toLowerCase(), handler);\n          }\n        });\n      }\n    }, {\n      immediate: true\n    });\n    return {\n      triggerRef\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_only_child = resolveComponent(\"el-only-child\");\n  return !_ctx.virtualTriggering ? (openBlock(), createBlock(_component_el_only_child, mergeProps({\n    key: 0\n  }, _ctx.$attrs, {\n    \"aria-describedby\": _ctx.open ? _ctx.id : void 0\n  }), {\n    default: withCtx(() => [renderSlot(_ctx.$slots, \"default\")]),\n    _: 3\n  }, 16, [\"aria-describedby\"])) : createCommentVNode(\"v-if\", true);\n}\nvar TwPopperTrigger = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { TwPopperTrigger as default };","map":{"version":3,"names":["_sfc_main","defineComponent","name","components","ElOnlyChild","OnlyChild","inheritAttrs","props","usePopperTriggerProps","onMouseenter","Function","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu","id","String","open","Boolean","setup","triggerRef","inject","POPPER_INJECTION_KEY","useForwardRef","watch","virtualRef","val","value","unwrapMeasurableEl","immediate","el","prevEl","HTMLElement","forEach","eventName","handler","addEventListener","slice","toLowerCase","removeEventListener","createBlock","_component_el_only_child","mergeProps","key","_ctx","$attrs","withCtx","renderSlot","$slots"],"sources":["/home/bonami/Desktop/Projects/ECommerce/packages/components/popper/src/trigger.vue"],"sourcesContent":["<template>\n  <el-only-child\n    v-if=\"!virtualTriggering\"\n    v-bind=\"$attrs\"\n    :aria-describedby=\"open ? id : undefined\"\n  >\n    <slot />\n  </el-only-child>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, inject, watch } from 'vue'\nimport { ElOnlyChild } from '@tw-element/components/slot'\nimport { useForwardRef } from '@tw-element/hooks'\nimport { usePopperTriggerProps } from './popper'\nimport { POPPER_INJECTION_KEY } from './tokens'\nimport { unwrapMeasurableEl } from './utils'\n\nexport default defineComponent({\n  name: 'TwPopperTrigger',\n  components: { ElOnlyChild },\n  inheritAttrs: false,\n  props: {\n    ...usePopperTriggerProps,\n    onMouseenter: Function,\n    onMouseleave: Function,\n    onClick: Function,\n    onKeydown: Function,\n    onFocus: Function,\n    onBlur: Function,\n    onContextmenu: Function,\n    id: String,\n    open: Boolean,\n  },\n  setup(props) {\n    const { triggerRef } = inject(POPPER_INJECTION_KEY, undefined)!\n    useForwardRef(triggerRef)\n\n    watch(\n      () => props.virtualRef,\n      (val) => {\n        if (val) {\n          triggerRef.value = unwrapMeasurableEl(val)\n        }\n      },\n      {\n        immediate: true,\n      }\n    )\n\n    watch(\n      () => triggerRef.value,\n      (el, prevEl) => {\n        if (el && el instanceof HTMLElement) {\n          ;[\n            'onMouseenter',\n            'onMouseleave',\n            'onClick',\n            'onKeydown',\n            'onFocus',\n            'onBlur',\n            'onContextmenu',\n          ].forEach((eventName) => {\n            const handler = props[eventName]\n            if (handler) {\n              ;(el as HTMLElement).addEventListener(\n                eventName.slice(2).toLowerCase(),\n                handler\n              )\n              ;(prevEl as HTMLElement)?.removeEventListener(\n                eventName.slice(2).toLowerCase(),\n                handler\n              )\n            }\n          })\n        }\n      },\n      {\n        immediate: true,\n      }\n    )\n\n    return {\n      triggerRef,\n    }\n  },\n})\n</script>\n"],"mappings":";;;;;;;;;AAkBA,MAAKA,SAAA,GAAaC,eAAA,CAAa;EAC7BC,IAAA,EAAM;EACNC,UAAA,EAAY;IAAAC,WAAA,EAAEC;EAAA;EACdC,YAAA,EAAc;EACdC,KAAA,EAAO;IAAA,GACFC,qBAAA;IACHC,YAAA,EAAcC,QAAA;IACdC,YAAA,EAAcD,QAAA;IACdE,OAAA,EAASF,QAAA;IACTG,SAAA,EAAWH,QAAA;IACXI,OAAA,EAASJ,QAAA;IACTK,MAAA,EAAQL,QAAA;IACRM,aAAA,EAAeN,QAAA;IACfO,EAAA,EAAIC,MAAA;IACJC,IAAA,EAAMC;EAAA;EAERC,MAAMd,KAAA,EAAO;IACX,MAAM;MAAEe;IAAA,IAAeC,MAAA,CAAOC,oBAAA,EAAsB;IACpDC,aAAA,CAAcH,UAAA;IAEdI,KAAA,CACE,MAAMnB,KAAA,CAAMoB,UAAA,EACXC,GAAA,IAAQ;MACP,IAAIA,GAAA,EAAK;QACPN,UAAA,CAAWO,KAAA,GAAQC,kBAAA,CAAmBF,GAAA;MAAA;IAAA,GAG1C;MACEG,SAAA,EAAW;IAAA;IAIfL,KAAA,CACE,MAAMJ,UAAA,CAAWO,KAAA,EACjB,CAACG,EAAA,EAAIC,MAAA,KAAW;MACd,IAAID,EAAA,IAAMA,EAAA,YAAcE,WAAA,EAAa;QACnC;QAAC,CACC,gBACA,gBACA,WACA,aACA,WACA,UACA,iBACAC,OAAA,CAASC,SAAA,IAAc;UACvB,MAAMC,OAAA,GAAU9B,KAAA,CAAM6B,SAAA;UACtB,IAAIC,OAAA,EAAS;YACX;YAAEL,EAAA,CAAmBM,gBAAA,CACnBF,SAAA,CAAUG,KAAA,CAAM,GAAGC,WAAA,IACnBH,OAAA;YAEAJ,MAAA,oBAAAA,MAAA,CAAAQ,mBAAA,CAAAL,SAEA,CAAAG,KAAA,IAAAC,WAAA,IAAAH,OAAA;UAAA;QAAA;MAAA;IAAA,GAMV;MACEN,SAAA,EAAW;IAAA;IAIf,OAAO;MACLT;IAAA;EAAA;AAAA;;;iDA/EDoB,WAAA,CAAkBC,wBAAA,EAAqBC,UAAA;IAAAC,GAAA;EAAA,GAAAC,IAAA,CAAAC,MAAA;IAAA,oBAAAD,IAAA,CAAA3B,IAAA,GAAA2B,IAAA,CAAA7B,EAAA;;aAExC+B,OAAA,CAAQ,OAAAC,UAAA,CAAAH,IAAA,CAAAI,MAAA,a"},"metadata":{},"sourceType":"module","externalDependencies":[]}