{"ast":null,"code":"import { defineComponent, ref, computed, resolveComponent, resolveDirective, openBlock, createBlock, Teleport, createVNode, Transition, withCtx, withDirectives, createElementVNode, normalizeClass, createElementBlock, normalizeStyle, withModifiers, renderSlot, toDisplayString, resolveDynamicComponent, createCommentVNode, vShow } from 'vue';\nimport '../../../directives/index.mjs';\nimport { ElOverlay } from '../../overlay/index.mjs';\nimport { TwIcon } from '../../icon/index.mjs';\nimport '../../../utils/index.mjs';\nimport '../../../hooks/index.mjs';\nimport { dialogProps, dialogEmits } from './dialog.mjs';\nimport { useDialog } from './use-dialog.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { CloseComponents } from '../../../utils/vue/icon.mjs';\nimport TrapFocus from '../../../directives/trap-focus/index.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { useSameTarget } from '../../../hooks/use-same-target/index.mjs';\nimport { useDraggable } from '../../../hooks/use-draggable/index.mjs';\nconst _sfc_main = defineComponent({\n  name: \"TwDialog\",\n  components: {\n    ElOverlay,\n    TwIcon,\n    ...CloseComponents\n  },\n  directives: {\n    TrapFocus\n  },\n  props: dialogProps,\n  emits: dialogEmits,\n  setup(props, ctx) {\n    const ns = useNamespace(\"dialog\");\n    const dialogRef = ref();\n    const headerRef = ref();\n    const dialog = useDialog(props, ctx, dialogRef);\n    const overlayEvent = useSameTarget(dialog.onModalClick);\n    const draggable = computed(() => props.draggable && !props.fullscreen);\n    useDraggable(dialogRef, headerRef, draggable);\n    return {\n      ns,\n      dialogRef,\n      headerRef,\n      overlayEvent,\n      ...dialog\n    };\n  }\n});\nconst _hoisted_1 = [\"aria-label\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_icon = resolveComponent(\"el-icon\");\n  const _component_el_overlay = resolveComponent(\"el-overlay\");\n  const _directive_trap_focus = resolveDirective(\"trap-focus\");\n  return openBlock(), createBlock(Teleport, {\n    to: \"body\",\n    disabled: !_ctx.appendToBody\n  }, [createVNode(Transition, {\n    name: \"dialog-fade\",\n    onAfterEnter: _ctx.afterEnter,\n    onAfterLeave: _ctx.afterLeave,\n    onBeforeLeave: _ctx.beforeLeave\n  }, {\n    default: withCtx(() => [withDirectives(createVNode(_component_el_overlay, {\n      \"custom-mask-event\": \"\",\n      mask: _ctx.modal,\n      \"overlay-class\": _ctx.modalClass,\n      \"z-index\": _ctx.zIndex\n    }, {\n      default: withCtx(() => [createElementVNode(\"div\", {\n        class: normalizeClass(`${_ctx.ns.namespace.value}-overlay-dialog`),\n        onClick: _cache[2] || (_cache[2] = (...args) => _ctx.overlayEvent.onClick && _ctx.overlayEvent.onClick(...args)),\n        onMousedown: _cache[3] || (_cache[3] = (...args) => _ctx.overlayEvent.onMousedown && _ctx.overlayEvent.onMousedown(...args)),\n        onMouseup: _cache[4] || (_cache[4] = (...args) => _ctx.overlayEvent.onMouseup && _ctx.overlayEvent.onMouseup(...args))\n      }, [withDirectives((openBlock(), createElementBlock(\"div\", {\n        ref: \"dialogRef\",\n        class: normalizeClass([_ctx.ns.b(), _ctx.ns.is(\"fullscreen\", _ctx.fullscreen), _ctx.ns.is(\"draggable\", _ctx.draggable), {\n          [_ctx.ns.m(\"center\")]: _ctx.center\n        }, _ctx.customClass]),\n        \"aria-modal\": \"true\",\n        role: \"dialog\",\n        \"aria-label\": _ctx.title || \"dialog\",\n        style: normalizeStyle(_ctx.style),\n        onClick: _cache[1] || (_cache[1] = withModifiers(() => {}, [\"stop\"]))\n      }, [createElementVNode(\"div\", {\n        ref: \"headerRef\",\n        class: normalizeClass(_ctx.ns.e(\"header\"))\n      }, [renderSlot(_ctx.$slots, \"title\", {}, () => [createElementVNode(\"span\", {\n        class: normalizeClass(_ctx.ns.e(\"title\"))\n      }, toDisplayString(_ctx.title), 3)]), _ctx.showClose ? (openBlock(), createElementBlock(\"button\", {\n        key: 0,\n        \"aria-label\": \"close\",\n        class: normalizeClass(_ctx.ns.e(\"headerbtn\")),\n        type: \"button\",\n        onClick: _cache[0] || (_cache[0] = (...args) => _ctx.handleClose && _ctx.handleClose(...args))\n      }, [createVNode(_component_el_icon, {\n        class: normalizeClass(_ctx.ns.e(\"close\"))\n      }, {\n        default: withCtx(() => [(openBlock(), createBlock(resolveDynamicComponent(_ctx.closeIcon || \"close\")))]),\n        _: 1\n      }, 8, [\"class\"])], 2)) : createCommentVNode(\"v-if\", true)], 2), _ctx.rendered ? (openBlock(), createElementBlock(\"div\", {\n        key: 0,\n        class: normalizeClass(_ctx.ns.e(\"body\"))\n      }, [renderSlot(_ctx.$slots, \"default\")], 2)) : createCommentVNode(\"v-if\", true), _ctx.$slots.footer ? (openBlock(), createElementBlock(\"div\", {\n        key: 1,\n        class: normalizeClass(_ctx.ns.e(\"footer\"))\n      }, [renderSlot(_ctx.$slots, \"footer\")], 2)) : createCommentVNode(\"v-if\", true)], 14, _hoisted_1)), [[_directive_trap_focus]])], 34)]),\n      _: 3\n    }, 8, [\"mask\", \"overlay-class\", \"z-index\"]), [[vShow, _ctx.visible]])]),\n    _: 3\n  }, 8, [\"onAfterEnter\", \"onAfterLeave\", \"onBeforeLeave\"])], 8, [\"disabled\"]);\n}\nvar Dialog = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { Dialog as default };","map":{"version":3,"names":["_sfc_main","defineComponent","name","components","ElOverlay","TwIcon","CloseComponents","directives","TrapFocus","props","dialogProps","emits","dialogEmits","setup","ctx","ns","useNamespace","dialogRef","ref","headerRef","dialog","useDialog","overlayEvent","useSameTarget","onModalClick","draggable","computed","fullscreen","useDraggable","openBlock","createBlock","Teleport","to","disabled","_ctx","appendToBody","createVNode","Transition","onAfterEnter","afterEnter","onAfterLeave","afterLeave","onBeforeLeave","beforeLeave","withDirectives","_component_el_overlay","mask","modal","modalClass","zIndex","withCtx","createElementVNode","class","normalizeClass","namespace","value","onClick","_cache","args","onMousedown","onMouseup","createElementBlock","b","is","m","center","customClass","role","title","style","normalizeStyle","withModifiers","e","renderSlot","$slots","toDisplayString","key","type","handleClose","_component_el_icon","resolveDynamicComponent","closeIcon","rendered","createCommentVNode","footer","vShow","visible"],"sources":["/home/bonami/Desktop/Projects/ECommerce/packages/components/dialog/src/dialog.vue"],"sourcesContent":["<template>\n  <teleport to=\"body\" :disabled=\"!appendToBody\">\n    <transition\n      name=\"dialog-fade\"\n      @after-enter=\"afterEnter\"\n      @after-leave=\"afterLeave\"\n      @before-leave=\"beforeLeave\"\n    >\n      <el-overlay\n        v-show=\"visible\"\n        custom-mask-event\n        :mask=\"modal\"\n        :overlay-class=\"modalClass\"\n        :z-index=\"zIndex\"\n      >\n        <div\n          :class=\"`${ns.namespace.value}-overlay-dialog`\"\n          @click=\"overlayEvent.onClick\"\n          @mousedown=\"overlayEvent.onMousedown\"\n          @mouseup=\"overlayEvent.onMouseup\"\n        >\n          <div\n            ref=\"dialogRef\"\n            v-trap-focus\n            :class=\"[\n              ns.b(),\n              ns.is('fullscreen', fullscreen),\n              ns.is('draggable', draggable),\n              { [ns.m('center')]: center },\n              customClass,\n            ]\"\n            aria-modal=\"true\"\n            role=\"dialog\"\n            :aria-label=\"title || 'dialog'\"\n            :style=\"style\"\n            @click.stop=\"\"\n          >\n            <div ref=\"headerRef\" :class=\"ns.e('header')\">\n              <slot name=\"title\">\n                <span :class=\"ns.e('title')\">\n                  {{ title }}\n                </span>\n              </slot>\n              <button\n                v-if=\"showClose\"\n                aria-label=\"close\"\n                :class=\"ns.e('headerbtn')\"\n                type=\"button\"\n                @click=\"handleClose\"\n              >\n                <el-icon :class=\"ns.e('close')\">\n                  <component :is=\"closeIcon || 'close'\" />\n                </el-icon>\n              </button>\n            </div>\n            <template v-if=\"rendered\">\n              <div :class=\"ns.e('body')\">\n                <slot></slot>\n              </div>\n            </template>\n            <div v-if=\"$slots.footer\" :class=\"ns.e('footer')\">\n              <slot name=\"footer\"></slot>\n            </div>\n          </div>\n        </div>\n      </el-overlay>\n    </transition>\n  </teleport>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, ref } from 'vue'\nimport { TrapFocus } from '@tw-element/directives'\nimport { ElOverlay } from '@tw-element/components/overlay'\nimport { TwIcon } from '@tw-element/components/icon'\nimport { CloseComponents } from '@tw-element/utils'\nimport { useNamespace, useDraggable, useSameTarget } from '@tw-element/hooks'\nimport { dialogProps, dialogEmits } from './dialog'\nimport { useDialog } from './use-dialog'\n\nexport default defineComponent({\n  name: 'TwDialog',\n  components: {\n    ElOverlay,\n    TwIcon,\n    ...CloseComponents,\n  },\n  directives: {\n    TrapFocus,\n  },\n\n  props: dialogProps,\n  emits: dialogEmits,\n\n  setup(props, ctx) {\n    const ns = useNamespace('dialog')\n    const dialogRef = ref<HTMLElement>()\n    const headerRef = ref<HTMLElement>()\n    const dialog = useDialog(props, ctx, dialogRef)\n    const overlayEvent = useSameTarget(dialog.onModalClick)\n\n    const draggable = computed(() => props.draggable && !props.fullscreen)\n    useDraggable(dialogRef, headerRef, draggable)\n\n    return {\n      ns,\n      dialogRef,\n      headerRef,\n      overlayEvent,\n      ...dialog,\n    }\n  },\n})\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}